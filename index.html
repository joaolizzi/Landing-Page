<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Roleta Avan√ßada ‚Äî Com Personagem e Painel 12</title>
<style>
  :root{
    --bg1:#071028; --bg2:#071827;
    --card:#081827; --accent:#ffd26b; --accent2:#ff8b6b;
    --muted:#90a6b6;
    font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0}
  body{
    background:linear-gradient(180deg,var(--bg1),var(--bg2));
    color:#ecf8ff; display:flex;align-items:center;justify-content:center;padding:18px;
  }
  .container{width:100%;max-width:1100px;display:grid;grid-template-columns:240px 1fr 320px;gap:18px;}
  @media(max-width:1100px){ .container{grid-template-columns:1fr; padding-bottom:20px} .left, .right{order:2} .center{order:1} }

  /* LEFT: personagem + painel 12 */
  .left{
    background:linear-gradient(180deg, rgba(255,255,255,0.015), transparent);
    border-radius:12px;padding:14px; display:flex;flex-direction:column;align-items:center;gap:12px;
    box-shadow:0 12px 30px rgba(2,6,23,0.6);
  }
  .mascot-wrap{width:180px;height:180px;display:flex;align-items:center;justify-content:center;position:relative}
  .mascot{width:140px;height:140px;transform-origin:center;transition:transform 400ms cubic-bezier(.2,.9,.3,1)}
  .mascot.cheer{animation:cheer 900ms ease forwards}
  @keyframes cheer{
    0%{ transform: translateY(0) scale(1) rotate(0deg)}
    30%{ transform: translateY(-8px) scale(1.05) rotate(-2deg)}
    60%{ transform: translateY(0) scale(1.02) rotate(2deg)}
    100%{ transform: translateY(-4px) scale(1.03) rotate(0deg)}
  }

  .meter{
    display:grid; grid-template-columns: repeat(3, 38px); gap:10px; justify-content:center;
  }
  .cell{
    width:38px;height:38px;border-radius:6px;background:rgba(255,255,255,0.03);
    border:1px solid rgba(255,255,255,0.04);display:flex;align-items:center;justify-content:center;
    transition:transform 260ms ease, box-shadow 260ms ease, background 260ms;
  }
  .cell.on{
    background: linear-gradient(180deg, rgba(255,210,110,0.18), rgba(255,160,60,0.06));
    box-shadow:0 6px 18px rgba(255,170,40,0.14);
    transform: translateY(-6px) scale(1.04);
  }
  .meter-label{font-size:13px;color:var(--muted);margin-top:6px;text-align:center}

  /* CENTER: reels */
  .center{
    background:linear-gradient(180deg, rgba(255,255,255,0.012), transparent);
    border-radius:12px;padding:18px; display:flex;flex-direction:column;gap:12px; align-items:center;
    box-shadow:0 12px 30px rgba(2,6,23,0.6);
  }
  .reels{display:flex;gap:12px;align-items:center;justify-content:center}
  .reel{
    width:120px;height:180px;overflow:hidden;border-radius:12px;background:linear-gradient(180deg,#081a25,#072433);
    position:relative;border:1px solid rgba(255,255,255,0.04);box-shadow:inset 0 6px 14px rgba(0,0,0,0.6);
    display:flex;align-items:center;justify-content:center;
  }
  .reel.spin .viewport{filter:blur(2.4px) saturate(1.08)}
  .viewport{position:absolute;left:0;top:0;width:100%;height:100%;will-change:transform}
  .symbol-slot{height:180px;display:flex;align-items:center;justify-content:center;font-size:56px}

  .controls{display:flex;gap:12px;align-items:center;width:100%;margin-top:6px}
  input[type=number]{width:96px;border-radius:10px;padding:10px;border:0;background:#071827;color:#dff6ff;font-weight:700;text-align:center}
  .btn{background:var(--accent);border:0;padding:10px 14px;border-radius:10px;font-weight:800;color:#071028;cursor:pointer;box-shadow:0 8px 22px rgba(255,182,60,0.12)}
  .btn:active{transform:translateY(1px)}
  .info-row{width:100%;display:flex;justify-content:space-between;align-items:center;margin-top:10px}
  .result{font-weight:800;color:#e8fff6}

  /* RIGHT: payouts / settings */
  .right{
    background:linear-gradient(180deg, rgba(255,255,255,0.015), transparent);
    border-radius:12px;padding:14px; display:flex;flex-direction:column;gap:12px;
    box-shadow:0 12px 30px rgba(2,6,23,0.6);
  }
  .stat{display:flex;justify-content:space-between;align-items:center;padding:6px 0}
  .small{font-size:13px;color:var(--muted)}
  .big{font-size:20px;font-weight:800}

  /* particles canvas */
  #fx{position:absolute;left:0;top:0;pointer-events:none;z-index:40}

  /* tiny trophy effect */
  .trophy{
    width:46px;height:46px;border-radius:8px;background:linear-gradient(180deg,#fff2c8,#ffd26b);
    display:flex;align-items:center;justify-content:center;color:#442d00;font-weight:900;
    box-shadow:0 10px 24px rgba(255,200,60,0.12);
  }

  footer{font-size:12px;color:var(--muted);margin-top:6px;text-align:center}
</style>
</head>
<body>
  <canvas id="fx"></canvas>

  <div class="container" id="appRoot">
    <!-- LEFT: Mascot + 12 cells -->
    <div class="left">
      <div class="mascot-wrap">
        <!-- Mascot SVG (inline, animates via CSS + JS) -->
        <svg class="mascot" id="mascot" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <!-- body -->
          <defs>
            <linearGradient id="gBody" x1="0" x2="1"><stop offset="0" stop-color="#ffd56a"/><stop offset="1" stop-color="#ff8b6b"/></linearGradient>
            <linearGradient id="gEye" x1="0" x2="1"><stop offset="0" stop-color="#fff"/><stop offset="1" stop-color="#e6f6ff"/></linearGradient>
            <filter id="fGlow" x="-50%" y="-50%" width="200%" height="200%"><feGaussianBlur stdDeviation="4" result="b"/><feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge></filter>
          </defs>
          <g transform="translate(100,100)">
            <g id="body" filter="url(#fGlow)">
              <ellipse cx="0" cy="16" rx="56" ry="60" fill="url(#gBody)"/>
              <path d="M-36,0 q36 -48 72 0" fill="#fff2a8" opacity="0.12"/>
            </g>
            <!-- face -->
            <g transform="translate(0,-6)">
              <circle cx="-16" cy="-8" r="10" fill="url(#gEye)"/>
              <circle cx="16" cy="-8" r="10" fill="url(#gEye)"/>
              <circle cx="-16" cy="-8" r="3" fill="#1a2b3b"/>
              <circle cx="16" cy="-8" r="3" fill="#1a2b3b"/>
              <path d="M -12 8 q12 12 24 0" stroke="#6d2a2a" stroke-width="3" stroke-linecap="round" fill="none"/>
            </g>
            <!-- blush -->
            <ellipse cx="-32" cy="2" rx="6" ry="4" fill="#ffb3b3" opacity="0.6"/>
            <ellipse cx="32" cy="2" rx="6" ry="4" fill="#ffb3b3" opacity="0.6"/>
            <!-- hand wave (simple) -->
            <g id="hand" transform="translate(62,6) rotate(12)">
              <circle cx="0" cy="0" r="9" fill="#ffd56a"/>
            </g>
          </g>
        </svg>
      </div>

      <div class="meter" id="meter">
        <!-- 12 cells generated by JS -->
      </div>
      <div class="meter-label">Painel de B√¥nus ‚Äî 12 quadrados</div>
      <div style="display:flex;gap:8px;margin-top:10px">
        <div class="trophy" id="miniTrophy">üèÜ</div>
        <div style="font-size:13px;color:var(--muted)"><strong id="meterCount">0</strong>/12</div>
      </div>
      <div style="width:100%;text-align:center;margin-top:6px">
        <button id="claimBtn" class="btn" style="padding:8px 12px">Resgatar Bonus</button>
      </div>
    </div>

    <!-- CENTER: Reels -->
    <div class="center">
      <div style="display:flex;align-items:center;justify-content:space-between;width:100%">
        <div>
          <div class="small">Roleta ‚Äî demo original</div>
          <div style="font-size:13px;color:var(--muted)">Toque SPIN para girar</div>
        </div>
        <div style="display:flex;gap:10px;align-items:center">
          <div class="small">Saldo</div>
          <div class="big" id="balance">100</div>
        </div>
      </div>

      <div class="reels" id="reels">
        <div class="reel" id="reel0"><div class="viewport" id="vp0"></div></div>
        <div class="reel" id="reel1"><div class="viewport" id="vp1"></div></div>
        <div class="reel" id="reel2"><div class="viewport" id="vp2"></div></div>
      </div>

      <div class="controls" style="margin-top:6px">
        <label class="small" for="bet">Aposta</label>
        <input id="bet" type="number" min="1" value="5" />
        <button id="dec" class="btn">-</button>
        <button id="inc" class="btn">+</button>
        <div style="flex:1"></div>
        <button id="spin" class="btn" style="width:140px">SPIN</button>
      </div>

      <div class="info-row">
        <div class="small">√öltimo</div>
        <div id="result" class="result">‚Äî</div>
      </div>

      <footer>Sem dinheiro real ‚Äî vers√£o educativa e original.</footer>
    </div>

    <!-- RIGHT: payouts and settings -->
    <div class="right">
      <h3 style="margin:0">Pagamentos & Stats</h3>
      <div style="color:var(--muted);font-size:13px">Customize os pagamentos se quiser.</div>
      <div style="margin-top:8px">
        <div class="stat"><div class="small">3 iguais</div><div class="small"><strong>12√ó</strong></div></div>
        <div class="stat"><div class="small">2 iguais</div><div class="small"><strong>3√ó</strong></div></div>
        <div class="stat"><div class="small">Estrela (triple)</div><div class="small"><strong>30√ó</strong></div></div>
      </div>

      <hr style="border:none;border-top:1px solid rgba(255,255,255,0.03)" />

      <div class="stat"><div class="small">Vit√≥rias sess√£o</div><div id="sessionWins" class="small">0</div></div>
      <div class="stat"><div class="small">Maior ganho</div><div id="bestWin" class="small">-</div></div>

      <div style="display:flex;gap:8px;margin-top:8px">
        <button id="reset" class="btn">Reset</button>
        <button id="soundBtn" class="btn">Som On</button>
      </div>

      <div style="margin-top:10px;color:var(--muted);font-size:13px">
        Dica: o painel de 12 quadrados enche com vit√≥rias; ao completar, ganhe um bonus especial.
      </div>
    </div>
  </div>

<script>
/* ========= Configs ========= */
const SYMBOLS_SVG = [
  // glossy SVG wrappers (small inline svgs used inside DOM)
  {id:'orange', html: svgCircle('#ff8f3f','#ffd6a6','üçä')},
  {id:'lemon', html: svgCircle('#ffd86b','#fff6d6','üçã')},
  {id:'cherry', html: svgCircle('#ff6b8a','#ffd6e0','üçí')},
  {id:'grape', html: svgCircle('#8b5cff','#d9cfff','üçá')},
  {id:'pine', html: svgCircle('#ffd76b','#fff2d0','üçç')},
  {id:'star', html: svgStar('#ffe86b','#fff8d8','‚≠ê')},
  {id:'tiger', html: svgTiger('#ffb46b','#ffdcb0','üêØ')}
];
const SYMBOLS_COUNT = SYMBOLS_SVG.length;
const REELS = 3;
const VIEWPORT = 180;
const TRACK_REPEAT = 8;

let balance = Number(localStorage.getItem('slot_balance')||100);
let bestWin = Number(localStorage.getItem('slot_best')||0);
let sessionWins = 0;
let meterCount = Number(localStorage.getItem('slot_meter')||0);

/* ====== DOM refs ====== */
const balanceEl = document.getElementById('balance');
const resultEl = document.getElementById('result');
const sessionWinsEl = document.getElementById('sessionWins');
const bestWinEl = document.getElementById('bestWin');
const betInput = document.getElementById('bet');
const spinBtn = document.getElementById('spin');
const incBtn = document.getElementById('inc');
const decBtn = document.getElementById('dec');
const resetBtn = document.getElementById('reset');
const soundBtn = document.getElementById('soundBtn');
const claimBtn = document.getElementById('claimBtn');
const meterRoot = document.getElementById('meter');
const meterCountEl = document.getElementById('meterCount');
const mascotEl = document.getElementById('mascot');

let soundOn = true;

/* ====== Canvas particles setup ====== */
const canvas = document.getElementById('fx');
const ctx = canvas.getContext('2d');
function fitCanvas(){
  const r = document.getElementById('appRoot').getBoundingClientRect();
  canvas.width = r.width; canvas.height = r.height; canvas.style.left = r.left + 'px'; canvas.style.top = r.top + 'px';
}
fitCanvas(); window.addEventListener('resize', fitCanvas);
let particles = [];
function emitParticles(x,y,color,count=50){
  for(let i=0;i<count;i++){
    particles.push({
      x, y,
      vx:(Math.random()-0.5)*8,
      vy:(Math.random()-1.2)*10,
      life: 60 + Math.random()*60,
      size: 4 + Math.random()*8,
      color
    });
  }
}
function updateParticles(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  for(let i=particles.length-1;i>=0;i--){
    const p = particles[i];
    p.x += p.vx; p.y += p.vy; p.vy += 0.3; p.life--;
    if(p.life<=0 || p.y > canvas.height+50) particles.splice(i,1);
    else{
      ctx.globalAlpha = Math.max(0, p.life/100);
      ctx.fillStyle = p.color;
      ctx.beginPath(); ctx.arc(p.x,p.y,p.size*(p.life/100),0,Math.PI*2); ctx.fill();
    }
  }
  requestAnimationFrame(updateParticles);
}
requestAnimationFrame(updateParticles);

/* ====== Audio (WebAudio) ========= */
const AudioCtx = window.AudioContext || window.webkitAudioContext;
let audioCtx;
function playTone(freq=440,duration=0.08,type='sine',gain=0.08){
  if(!soundOn) return;
  if(!audioCtx) audioCtx = new AudioCtx();
  const o = audioCtx.createOscillator();
  const g = audioCtx.createGain();
  o.type = type; o.frequency.value = freq;
  g.gain.value = gain;
  o.connect(g); g.connect(audioCtx.destination);
  o.start(); o.stop(audioCtx.currentTime + duration);
}

/* ====== Build reels tracks ====== */
for(let r=0;r<REELS;r++){
  const vp = document.getElementById('vp'+r);
  vp.style.transition = 'none';
  vp.style.transform = 'translateY(0px)';
  vp.innerHTML = '';
  for(let rep=0; rep<TRACK_REPEAT; rep++){
    for(let s=0;s<SYMBOLS_SVG.length;s++){
      const slot = document.createElement('div');
      slot.className = 'symbol-slot';
      slot.style.height = VIEWPORT + 'px';
      slot.innerHTML = SYMBOLS_SVG[s].html;
      vp.appendChild(slot);
    }
  }
  // initial center offset
  vp.style.transform = `translateY(${-VIEWPORT}px)`;
}

/* ====== Build meter (12 cells) ====== */
function buildMeter(){
  meterRoot.innerHTML = '';
  for(let i=0;i<12;i++){
    const c = document.createElement('div');
    c.className = 'cell';
    if(i < meterCount) c.classList.add('on');
    c.dataset.index = i;
    c.innerHTML = `<svg width="20" height="20" viewBox="0 0 24 24" aria-hidden="true"><rect x="2" y="2" width="20" height="20" rx="3" fill="${i < meterCount ? '#ffd86b' : 'rgba(255,255,255,0.03)'}"></rect></svg>`;
    meterRoot.appendChild(c);
  }
  meterCountEl.textContent = meterCount;
}
buildMeter();

/* ====== Helpers ====== */
function randInt(a,b){ return Math.floor(Math.random()*(b-a+1))+a; }
function mod(n,m){ return ((n%m)+m)%m; }
function updateUI(){
  balanceEl.textContent = balance;
  sessionWinsEl.textContent = sessionWins;
  bestWinEl.textContent = bestWin>0 ? bestWin : '-';
  meterCountEl.textContent = meterCount;
  localStorage.setItem('slot_balance', balance);
  localStorage.setItem('slot_best', bestWin);
  localStorage.setItem('slot_meter', meterCount);
}
updateUI();

/* ====== Spin logic ====== */
let spinning = false;
spinBtn.addEventListener('click', ()=>{ if(!spinning) startSpin(); });
incBtn.addEventListener('click', ()=>{ betInput.value = Math.min(9999, Math.max(1, Number(betInput.value||1) * 2)); });
decBtn.addEventListener('click', ()=>{ betInput.value = Math.max(1, Math.floor(Number(betInput.value||1) / 2)); });
resetBtn.addEventListener('click', ()=>{ balance=100; sessionWins=0; bestWin=0; meterCount=0; buildMeter(); updateUI(); });
soundBtn.addEventListener('click', ()=>{ soundOn=!soundOn; soundBtn.textContent = soundOn ? 'Som On' : 'Som Off'; });
claimBtn.addEventListener('click', ()=>{ // resgatar bonus simples
  if(meterCount >= 12){
    const bonus = 200;
    balance += bonus;
    meterCount = 0; buildMeter(); updateUI();
    resultEl.textContent = `B√îNUS! +${bonus} moedas`;
    bigCelebrate();
  } else {
    resultEl.textContent = `Painel incompleto (${meterCount}/12)`;
  }
});

async function startSpin(){
  spinning = true;
  spinBtn.disabled = true;
  const bet = Math.max(1, Math.floor(Number(betInput.value) || 1));
  if(bet > balance){ resultEl.textContent = 'Saldo insuficiente'; playTone(180,0.12,'sawtooth',0.06); spinBtn.disabled=false; spinning=false; return; }
  balance -= bet; updateUI();
  resultEl.textContent = 'Girando...';
  playTone(420,0.06,'sine',0.06);

  // choose finals with rarity for star
  function chooseSymbol(){
    const r = Math.random();
    if(r > 0.96) return SYMBOLS_SVG.findIndex(s=>s.id==='star');
    return Math.floor(Math.random()*SYMBOLS_SVG.length);
  }
  const finals = [chooseSymbol(), chooseSymbol(), chooseSymbol()];

  // animate reels
  const promises = [];
  for(let r=0;r<REELS;r++){
    const base = randInt(7,11);
    const extra = randInt(0, SYMBOLS_SVG.length-1);
    const totalSymbols = base * SYMBOLS_SVG.length + finals[r] + extra;
    const duration = 1400 + r*420 + Math.floor(Math.random()*260);
    promises.push(animateReel(r, totalSymbols, duration));
    document.getElementById('reel'+r).classList.add('spin');
  }

  await Promise.all(promises);

  for(let r=0;r<REELS;r++) document.getElementById('reel'+r).classList.remove('spin');

  // check payouts
  const ids = finals.map(i => SYMBOLS_SVG[i].id);
  let win = 0;
  if(ids[0]===ids[1] && ids[1]===ids[2]){
    if(ids[0]==='star') win = bet * 30;
    else win = bet * 12;
  } else if(ids[0]===ids[1] || ids[1]===ids[2] || ids[0]===ids[2]){
    win = bet * 3;
  }

  if(win > 0){
    balance += win;
    sessionWins++;
    resultEl.textContent = `Ganhou ${win}! (${SYMBOLS_SVG[finals[0]].id} ${SYMBOLS_SVG[finals[1]].id} ${SYMBOLS_SVG[finals[2]].id})`;
    // meter increments: +1 per win, +3 if triple star
    meterCount += (ids[0]===ids[1] && ids[1]===ids[2] && ids[0]==='star') ? 4 : 1;
    if(meterCount > 12) meterCount = 12;
    buildMeter();
    updateUI();
    // celebratory
    const rect = document.getElementById('reels').getBoundingClientRect();
    emitParticles(rect.left + rect.width/2, rect.top + 30, '#ffd86b', 120);
    playTone(880,0.14,'sine',0.12); setTimeout(()=>playTone(640,0.09,'triangle',0.08), 140);
    animateMascotCheer();
    // highlight winning reels for matched ones
    highlightMatched(ids);
  } else {
    resultEl.textContent = `Sem combina√ß√£o (${SYMBOLS_SVG[finals[0]].id} ${SYMBOLS_SVG[finals[1]].id} ${SYMBOLS_SVG[finals[2]].id})`;
    playTone(240,0.08,'sawtooth',0.05);
    // reset meter slightly on loss
    meterCount = Math.max(0, meterCount - 0);
    buildMeter(); updateUI();
  }

  // if meter completes
  if(meterCount >= 12){
    // big celebration
    await new Promise(r=>setTimeout(r,250));
    bigCelebrate();
  }

  // finalize
  spinning = false;
  spinBtn.disabled = false;
  updateUI();
}

/* animate each reel by changing translateY over time (rAF easing) */
function animateReel(reelIndex, totalSymbols, duration){
  return new Promise(resolve=>{
    const vp = document.getElementById('vp'+reelIndex);
    const startY = getTranslateY(vp);
    const endY = startY - totalSymbols * VIEWPORT;
    const t0 = performance.now();
    function frame(t){
      const p = Math.min(1, (t - t0) / duration);
      const eased = easeOutCubic(p);
      const curY = startY + (endY - startY) * eased;
      vp.style.transform = `translateY(${curY}px)`;
      if(p < 1) requestAnimationFrame(frame);
      else {
        // snap to a short track around final symbol
        const totalMoved = Math.abs(Math.round((endY - startY) / VIEWPORT));
        const finalIndex = totalMoved % SYMBOLS_SVG.length;
        vp.innerHTML = '';
        const ctxCount = 3;
        for(let i=-ctxCount;i<=ctxCount;i++){
          const idx = mod(finalIndex + i, SYMBOLS_SVG.length);
          const d = document.createElement('div');
          d.className = 'symbol-slot';
          d.style.height = VIEWPORT + 'px';
          d.innerHTML = SYMBOLS_SVG[idx].html;
          vp.appendChild(d);
        }
        vp.style.transition = 'none';
        vp.style.transform = `translateY(${-ctxCount * VIEWPORT}px)`;
        setTimeout(()=>resolve(), 60);
      }
    }
    requestAnimationFrame(frame);
  });
}

/* highlight matched reels */
function highlightMatched(ids){
  // find which positions match
  const winners = [];
  if(ids[0]===ids[1]) winners.push(0,1);
  if(ids[1]===ids[2]) winners.push(1,2);
  if(ids[0]===ids[2]) winners.push(0,2);
  winners.forEach(i=>{
    const el = document.getElementById('reel'+i);
    el.classList.add('win');
    setTimeout(()=>el.classList.remove('win'), 1400);
  });
}

/* mascot cheer animation */
function animateMascotCheer(){
  mascotEl.classList.remove('cheer');
  void mascotEl.offsetWidth;
  mascotEl.classList.add('cheer');
}

/* big celebration when meter finishes */
function bigCelebrate(){
  return new Promise(resolve=>{
    playTone(1200,0.18,'sine',0.16); playTone(1000,0.14,'triangle',0.12);
    // emit lots of particles across left and center
    const rect = document.getElementById('appRoot').getBoundingClientRect();
    for(let i=0;i<8;i++){
      emitParticles(rect.left + Math.random()*rect.width, rect.top + 40 + Math.random()*rect.height/2, i%2? '#ffd86b' : '#ff9c9c', 80);
    }
    // animate cells flash
    const cells = meterRoot.querySelectorAll('.cell');
    cells.forEach((c,i)=>{
      setTimeout(()=>{ c.classList.add('on'); c.style.transform='translateY(-10px) scale(1.08)'; }, i*60);
      setTimeout(()=>{ c.style.transform='translateY(0) scale(1)'; }, 1200 + i*10);
    });
    // reward: add coins
    const bonus = 250;
    balance += bonus;
    meterCount = 0;
    buildMeter(); updateUI();
    sessionWins++;
    setTimeout(()=>{ resolve(); }, 1400);
  });
}

/* utilities */
function easeOutCubic(t){ return 1 - Math.pow(1 - t, 3); }
function getTranslateY(el){
  const st = getComputedStyle(el).transform;
  if(st && st !== 'none'){
    const m = st.match(/matrix.*\((.+)\)/);
    if(m){ const vals = m[1].split(', '); return parseFloat(vals[5]); }
  }
  return 0;
}

/* SVG helper functions (returns small SVG string to embed inside slot) */
function svgCircle(color1,color2,label){
  return `<svg width="86" height="86" viewBox="0 0 86 86" xmlns="http://www.w3.org/2000/svg">
    <defs>
      <linearGradient id="g${color1.replace('#','')}" x1="0" x2="1"><stop offset="0" stop-color="${color1}"/><stop offset="1" stop-color="${color2}"/></linearGradient>
      <filter id="s${color1.replace('#','')}" x="-50%" y="-50%" width="200%" height="200%"><feGaussianBlur stdDeviation="6" result="b"/><feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge></filter>
    </defs>
    <g transform="translate(43,43)">
      <circle r="34" fill="url(#g${color1.replace('#','')})" />
      <circle r="22" fill="rgba(255,255,255,0.06)" transform="translate(-10,-12) rotate(-18)"/>
      <text x="0" y="8" text-anchor="middle" font-size="28" font-family="Segoe UI Emoji, Apple Color Emoji, sans-serif">${label}</text>
    </g>
  </svg>`;
}
function svgStar(color1,color2,label){
  return `<svg width="86" height="86" viewBox="0 0 86 86" xmlns="http://www.w3.org/2000/svg">
    <defs>
      <linearGradient id="gs${color1.replace('#','')}" x1="0" x2="1"><stop offset="0" stop-color="${color1}"/><stop offset="1" stop-color="${color2}"/></linearGradient>
    </defs>
    <g transform="translate(43,43)">
      <path d="M0,-30 L8,-6 L34,-6 L12,8 L20,32 L0,18 L-20,32 L-12,8 L-34,-6 L-8,-6 Z" fill="url(#gs${color1.replace('#','')})"/>
      <text x="0" y="8" text-anchor="middle" font-size="28" font-family="Segoe UI Emoji, Apple Color Emoji, sans-serif">${label}</text>
    </g>
  </svg>`;
}
function svgTiger(c1,c2,label){
  return `<svg width="86" height="86" viewBox="0 0 86 86" xmlns="http://www.w3.org/2000/svg">
    <defs><linearGradient id="gt${c1.replace('#','')}" x1="0" x2="1"><stop offset="0" stop-color="${c1}"/><stop offset="1" stop-color="${c2}"/></linearGradient></defs>
    <g transform="translate(43,43)">
      <circle r="34" fill="url(#gt${c1.replace('#','')})"/>
      <circle r="12" cx="-10" cy="-6" fill="#fff"/>
      <circle r="12" cx="10" cy="-6" fill="#fff"/>
      <text x="0" y="20" text-anchor="middle" font-size="24">${label}</text>
    </g>
  </svg>`;
}

/* Initialize */
(function init(){
  // ensure meter built and UI updated
  buildMeter();
  updateUI();
})();
</script>
</body>
</html>